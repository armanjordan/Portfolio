{"ast":null,"code":"import _slicedToArray from\"/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*\n * Copyright (C) 2018-2022 David C. Harrison. All right reserved.\n *\n * You may not use, distribute, publish, or modify this code without\n * the express written permission of the copyright holder.\n */import React from'react';import Avatar from'@mui/material/Avatar';import Box from'@mui/material/Box';import Grid from'@mui/material/Grid';import Typography from'@mui/material/Typography';import StarBorderIcon from'@mui/icons-material/StarBorder';import IconButton from'@mui/material/IconButton';import StarIcon from'@mui/icons-material/Star';import AppBar from'@mui/material/AppBar';import Toolbar from'@mui/material/Toolbar';import'./Window.css';import WindowContext from'./WindowContext.jsx';import Logout from'./Logout.jsx';// import {useNavigate} from 'react-router-dom';\n// Grab all of the emails from the queried mailbox\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var fetchEmails=function fetchEmails(setPrintedEmails,setError){var item=localStorage.getItem('user');if(!item){// window.location.reload();\nreturn;}var user=JSON.parse(item);// was: const bearerToken = user ? user.accessToken : '';\nvar bearerToken=user.accessToken;fetch('http://localhost:3010/v0/mail?mailbox=Inbox',{method:'get',headers:new Headers({'Authorization':\"Bearer \".concat(bearerToken),'Content-Type':'application/x-www-form-urlencoded'})}).then(function(response){if(!response.ok){throw response;}return response.json();}).then(function(json){setError('');setPrintedEmails(json);}).catch(function(error){setPrintedEmails([]);setError(\"\".concat(error.status,\" - \").concat(error.statusText));});};/**\n  * Function to generate email html\n  *\n  *  @param {array} printedEmails An array of sorted formatted emails\n  *  @return {object} All of the email html\n  */var writeEmails=function writeEmails(printedEmails){var keyNum=0;return(// if email.avatarDisplay == true, display, otherwise substring(0, 1)\nprintedEmails.map(function(email){return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',borderTop:1,borderBottom:1},width:\"610px\",children:/*#__PURE__*/_jsxs(Grid,{sx:{display:'flex',justifyContent:'flex-start',padding:1},children:[email.displayAvatar==='true'?/*#__PURE__*/_jsx(Avatar,{src:email.avatar,sx:{padding:2,marginRight:3,marginTop:1}}):/*#__PURE__*/_jsx(Avatar,{sx:{padding:2,marginRight:3,marginTop:1},children:email.fromName.substring(0,1).toUpperCase()}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Grid,{width:\"500px\",sx:{display:'flex',justifyContent:'space-between'},children:[email.opened==='false'?/*#__PURE__*/_jsx(Typography,{align:\"left\",sx:{fontWeight:'bold'},children:email.fromName}):/*#__PURE__*/_jsx(Typography,{align:\"left\",children:email.fromName}),/*#__PURE__*/_jsx(Typography,{align:\"right\",sx:{marginRight:2},children:email.received})]}),email.opened==='false'?/*#__PURE__*/_jsx(Typography,{sx:{marginTop:1.2,fontWeight:'bold'},children:email.subject}):/*#__PURE__*/_jsx(Typography,{sx:{marginTop:1.2},children:email.subject}),/*#__PURE__*/_jsxs(Grid,{width:\"500px\",sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{sx:{textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap',marginTop:1.2},align:\"left\",children:email.content}),email.starred==='false'?/*#__PURE__*/_jsxs(IconButton,{children:[\" \",/*#__PURE__*/_jsx(StarBorderIcon,{}),\" \"]}):/*#__PURE__*/_jsxs(IconButton,{children:[\" \",/*#__PURE__*/_jsx(StarIcon,{}),\" \"]})]})]})]})})},keyNum++);}));};/**\n * Simple component with no state.\n *\n * See the basic-react example for an example of adding and reacting to\n * changes in state and lecture 10 for details on Material-UI\n *\n * @return {object} JSX\n */function Window(){// State variables\n// A state to store which mailbox to print\nvar _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),printedEmails=_React$useState2[0],setPrintedEmails=_React$useState2[1];var _React$useState3=React.useState('Logged Out'),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];// const history = useNavigate();\nReact.useEffect(function(){fetchEmails(setPrintedEmails,setError);},[printedEmails]);/*\n  React.useEffect(() => {\n    if (!printedEmails.length) {\n      history('/login');\n    }\n  }, [printedEmails]);\n  */var globalVars={printedEmails:printedEmails,setPrintedEmails:setPrintedEmails,error:error,setError:setError};// after this effect, printedEmails should be populated with sorted\n// and formatted dates, time to print!\nreturn/*#__PURE__*/_jsx(WindowContext.Provider,{value:globalVars,children:/*#__PURE__*/_jsxs(\"div\",{tabIndex:0,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Div\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",sx:{zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsxs(Grid,{width:\"600px\",sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:\"div\",align:\"left\",sx:{margin:1},children:\"Inbox\"}),/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Logout,{})]})})})})}),/*#__PURE__*/_jsx(\"div\",{children:writeEmails(printedEmails)})]})});}export default Window;","map":{"version":3,"names":["React","Avatar","Box","Grid","Typography","StarBorderIcon","IconButton","StarIcon","AppBar","Toolbar","WindowContext","Logout","fetchEmails","setPrintedEmails","setError","item","localStorage","getItem","user","JSON","parse","bearerToken","accessToken","fetch","method","headers","Headers","then","response","ok","json","catch","error","status","statusText","writeEmails","printedEmails","keyNum","map","email","display","borderTop","borderBottom","justifyContent","padding","displayAvatar","avatar","marginRight","marginTop","fromName","substring","toUpperCase","opened","fontWeight","received","subject","textOverflow","overflow","whiteSpace","content","starred","Window","useState","useEffect","globalVars","flexGrow","zIndex","theme","drawer","margin"],"sources":["/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Window.jsx"],"sourcesContent":["/*\n * Copyright (C) 2018-2022 David C. Harrison. All right reserved.\n *\n * You may not use, distribute, publish, or modify this code without\n * the express written permission of the copyright holder.\n */\n\nimport React from 'react';\n\nimport Avatar from '@mui/material/Avatar';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\nimport IconButton from '@mui/material/IconButton';\nimport StarIcon from '@mui/icons-material/Star';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\n\nimport './Window.css';\n\nimport WindowContext from './WindowContext.jsx';\nimport Logout from './Logout.jsx';\n// import {useNavigate} from 'react-router-dom';\n\n// Grab all of the emails from the queried mailbox\nconst fetchEmails = (setPrintedEmails, setError) => {\n  const item = localStorage.getItem('user');\n  if (!item) {\n    // window.location.reload();\n    return;\n  }\n  const user = JSON.parse(item);\n  // was: const bearerToken = user ? user.accessToken : '';\n  const bearerToken = user.accessToken;\n  fetch('http://localhost:3010/v0/mail?mailbox=Inbox', {\n    method: 'get',\n    headers: new Headers({\n      'Authorization': `Bearer ${bearerToken}`,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }),\n  })\n    .then((response) => {\n      if (!response.ok) {\n        throw response;\n      }\n      return response.json();\n    })\n    .then((json) => {\n      setError('');\n      setPrintedEmails(json);\n    })\n    .catch((error) => {\n      setPrintedEmails([]);\n      setError(`${error.status} - ${error.statusText}`);\n    });\n};\n\n\n/**\n  * Function to generate email html\n  *\n  *  @param {array} printedEmails An array of sorted formatted emails\n  *  @return {object} All of the email html\n  */\nconst writeEmails = (printedEmails) => {\n  let keyNum = 0;\n  return (\n    // if email.avatarDisplay == true, display, otherwise substring(0, 1)\n    printedEmails.map((email) => (\n      <Box key={keyNum++}>\n        <Box\n          sx={{display: 'flex', borderTop: 1, borderBottom: 1}} width='610px'\n        >\n          <Grid sx={{\n            display: 'flex',\n            justifyContent: 'flex-start',\n            padding: 1,\n          }}>\n            {email.displayAvatar === 'true' ?\n              <Avatar src={email.avatar}\n                sx={{padding: 2, marginRight: 3, marginTop: 1}}>\n              </Avatar> :\n              <Avatar sx={{padding: 2, marginRight: 3, marginTop: 1}}>\n                {(email.fromName).substring(0, 1).toUpperCase()}\n              </Avatar>\n            }\n            <Box>\n              <Grid width='500px' sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n              }}>\n                {email.opened === 'false' ?\n                  <Typography align='left' sx={{fontWeight: 'bold'}}>\n                    {email.fromName}\n                  </Typography> :\n                  <Typography align='left'>\n                    {email.fromName}\n                  </Typography>\n                }\n\n                <Typography align='right' sx={{marginRight: 2}}>\n                  {email.received}\n                </Typography>\n              </Grid>\n              {email.opened === 'false' ?\n                <Typography sx={{marginTop: 1.2, fontWeight: 'bold'}}>\n                  {email.subject}\n                </Typography> :\n                <Typography sx={{marginTop: 1.2}}>\n                  {email.subject}\n                </Typography>\n              }\n\n              <Grid width='500px' sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n              }}>\n                <Typography\n                  sx={{\n                    textOverflow: 'ellipsis',\n                    overflow: 'hidden',\n                    whiteSpace: 'nowrap',\n                    marginTop: 1.2,\n                  }}\n                  align='left'>\n                  {email.content}\n                </Typography>\n                {email.starred === 'false' ?\n                  <IconButton> <StarBorderIcon /> </IconButton> :\n                  <IconButton> <StarIcon /> </IconButton>\n                }\n              </Grid>\n            </Box>\n          </Grid>\n        </Box>\n      </Box>\n    ))\n  );\n};\n\n/**\n * Simple component with no state.\n *\n * See the basic-react example for an example of adding and reacting to\n * changes in state and lecture 10 for details on Material-UI\n *\n * @return {object} JSX\n */\nfunction Window() {\n  // State variables\n  // A state to store which mailbox to print\n  const [printedEmails, setPrintedEmails] = React.useState([]);\n  const [error, setError] = React.useState('Logged Out');\n\n  // const history = useNavigate();\n\n  React.useEffect(() => {\n    fetchEmails(setPrintedEmails, setError);\n  }, [printedEmails]);\n\n  /*\n  React.useEffect(() => {\n    if (!printedEmails.length) {\n      history('/login');\n    }\n  }, [printedEmails]);\n  */\n\n  const globalVars = {\n    printedEmails: printedEmails,\n    setPrintedEmails,\n    error: error,\n    setError,\n  };\n\n  // after this effect, printedEmails should be populated with sorted\n  // and formatted dates, time to print!\n\n  return (\n    <WindowContext.Provider value={globalVars}>\n      <div tabIndex={0}>\n        <h2>Div</h2>\n\n        <div>\n          <Box sx={{flexGrow: 1}}>\n            <AppBar position=\"fixed\" sx={{zIndex: (theme) =>\n              theme.zIndex.drawer + 1}}>\n              <Toolbar>\n                <Grid width='600px' sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                }}>\n                  <Typography\n                    variant=\"h6\" noWrap component=\"div\"\n                    align=\"left\" sx={{margin: 1}}\n                  >\n                    Inbox\n                  </Typography>\n                  <>\n                  </>\n                  <Logout/>\n                </Grid>\n              </Toolbar>\n            </AppBar>\n          </Box>\n        </div>\n\n        <div>\n          {writeEmails(printedEmails)}\n        </div>\n      </div>\n    </WindowContext.Provider>\n  );\n}\n\nexport default Window;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}