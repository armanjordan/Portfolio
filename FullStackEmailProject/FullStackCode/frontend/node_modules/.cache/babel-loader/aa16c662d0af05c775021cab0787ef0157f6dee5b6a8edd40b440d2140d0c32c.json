{"ast":null,"code":"var _jsxFileName = \"/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Login.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n/**\n * @return {object} Login Screen\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [user, setUser] = React.useState({\n    email: '',\n    password: ''\n  });\n  const history = useNavigate();\n  React.useEffect(() => {\n    localStorage.removeItem('user');\n  }, []);\n  const handleInputChange = event => {\n    const {\n      value,\n      name\n    } = event.target;\n    const u = user;\n    u[name] = value;\n    setUser(u);\n  };\n\n  // on submission of email and password\n  const handleSubmit = event => {\n    event.preventDefault();\n    // call the login POST function\n    fetch('http://localhost:3010/v0/login', {\n      method: 'POST',\n      // what am I putting into the body? --------------------------------------\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    // return whatever the json was ({email, access token})\n    .then(res => {\n      if (!res.ok) {\n        throw res;\n      }\n      return res.json();\n    })\n    // store in local storage with key 'user' the stringified json\n    .then(json => {\n      // stores {email, access token}\n      localStorage.setItem('user', JSON.stringify(json));\n      // puts us to the homepage of the application\n      // change this to /mailbox\n      history('/');\n    })\n    // if theres a problem logging in, errors\n    .catch(err => {\n      alert('Error logging in (${err}), please try again');\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      onChange: handleInputChange,\n      name: \"email\",\n      label: \"Email Address\",\n      autoFocus: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      onChange: handleInputChange,\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      onClick: handleSubmit,\n      children: \"Log In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"fLHs/Wn3zxCWm2KzJiKioB/Dbco=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useNavigate","Login","user","setUser","useState","email","password","history","useEffect","localStorage","removeItem","handleInputChange","event","value","name","target","u","handleSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","ok","json","setItem","catch","err","alert"],"sources":["/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Login.jsx"],"sourcesContent":["import React from 'react';\nimport {useNavigate} from 'react-router-dom';\n\n/**\n * @return {object} Login Screen\n */\nfunction Login() {\n  const [user, setUser] = React.useState({email: '', password: ''});\n  const history = useNavigate();\n\n  React.useEffect(() => {\n    localStorage.removeItem('user');\n  }, []);\n\n  const handleInputChange = (event) => {\n    const {value, name} = event.target;\n    const u = user;\n    u[name] = value;\n    setUser(u);\n  };\n\n  // on submission of email and password\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // call the login POST function\n    fetch('http://localhost:3010/v0/login', {\n      method: 'POST',\n      // what am I putting into the body? --------------------------------------\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    // return whatever the json was ({email, access token})\n    .then((res) => {\n      if (!res.ok) {\n        throw res\n      }\n      return res.json()  \n    })\n    // store in local storage with key 'user' the stringified json\n    .then((json) => {\n      // stores {email, access token}\n      localStorage.setItem('user', JSON.stringify(json));\n      // puts us to the homepage of the application\n      // change this to /mailbox\n      history('/');\n    })\n    // if theres a problem logging in, errors\n    .catch((err) => {\n      alert('Error logging in (${err}), please try again');\n    });\n  }\n\n  return (\n    <Container>\n      <TextField\n        onChange={handleInputChange}\n        name='email'\n        label=\"Email Address\"\n        autoFocus\n      />\n      <TextField\n        onChange={handleInputChange}\n        name=\"password\"\n        type=\"password\"\n        label=\"Password\"\n      />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        onClick={handleSubmit}\n      >\n       Log In \n      </Button>\n    </Container>\n  );\n}\n\nexport default Login;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,WAAW,QAAO,kBAAkB;;AAE5C;AACA;AACA;AAFA;AAGA,SAASC,KAAK,GAAG;EAAA;EACf,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGJ,KAAK,CAACK,QAAQ,CAAC;IAACC,KAAK,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAE,CAAC,CAAC;EACjE,MAAMC,OAAO,GAAGP,WAAW,EAAE;EAE7BD,KAAK,CAACS,SAAS,CAAC,MAAM;IACpBC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;IACnC,MAAM;MAACC,KAAK;MAAEC;IAAI,CAAC,GAAGF,KAAK,CAACG,MAAM;IAClC,MAAMC,CAAC,GAAGd,IAAI;IACdc,CAAC,CAACF,IAAI,CAAC,GAAGD,KAAK;IACfV,OAAO,CAACa,CAAC,CAAC;EACZ,CAAC;;EAED;EACA,MAAMC,YAAY,GAAIL,KAAK,IAAK;IAC9BA,KAAK,CAACM,cAAc,EAAE;IACtB;IACAC,KAAK,CAAC,gCAAgC,EAAE;MACtCC,MAAM,EAAE,MAAM;MACd;MACAC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACrB,IAAI,CAAC;MAC1BsB,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC;IACD;IAAA,CACCC,IAAI,CAAEC,GAAG,IAAK;MACb,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;QACX,MAAMD,GAAG;MACX;MACA,OAAOA,GAAG,CAACE,IAAI,EAAE;IACnB,CAAC;IACD;IAAA,CACCH,IAAI,CAAEG,IAAI,IAAK;MACd;MACAnB,YAAY,CAACoB,OAAO,CAAC,MAAM,EAAEP,IAAI,CAACC,SAAS,CAACK,IAAI,CAAC,CAAC;MAClD;MACA;MACArB,OAAO,CAAC,GAAG,CAAC;IACd,CAAC;IACD;IAAA,CACCuB,KAAK,CAAEC,GAAG,IAAK;MACdC,KAAK,CAAC,6CAA6C,CAAC;IACtD,CAAC,CAAC;EACJ,CAAC;EAED,oBACE,QAAC,SAAS;IAAA,wBACR,QAAC,SAAS;MACR,QAAQ,EAAErB,iBAAkB;MAC5B,IAAI,EAAC,OAAO;MACZ,KAAK,EAAC,eAAe;MACrB,SAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACT,eACF,QAAC,SAAS;MACR,QAAQ,EAAEA,iBAAkB;MAC5B,IAAI,EAAC,UAAU;MACf,IAAI,EAAC,UAAU;MACf,KAAK,EAAC;IAAU;MAAA;MAAA;MAAA;IAAA,QAChB,eACF,QAAC,MAAM;MACL,IAAI,EAAC,QAAQ;MACb,OAAO,EAAC,WAAW;MACnB,OAAO,EAAEM,YAAa;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAGf;EAAA;IAAA;IAAA;IAAA;EAAA,QACC;AAEhB;AAAC,GAvEQhB,KAAK;EAAA,QAEID,WAAW;AAAA;AAAA,KAFpBC,KAAK;AAyEd,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}