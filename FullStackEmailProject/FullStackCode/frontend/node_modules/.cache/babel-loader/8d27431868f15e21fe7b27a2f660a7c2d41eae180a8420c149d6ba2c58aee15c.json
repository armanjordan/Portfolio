{"ast":null,"code":"var _jsxFileName = \"/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Login.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\n\n/**\n * @return {object} Login Screen\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [user, setUser] = React.useState({\n    email: '',\n    password: ''\n  });\n  const history = useNavigate();\n  React.useEffect(() => {\n    localStorage.removeItem('user');\n  }, []);\n  const handleInputChange = event => {\n    const {\n      value,\n      name\n    } = event.target;\n    const u = user;\n    u[name] = value;\n    setUser(u);\n  };\n\n  // on submission of email and password\n  const handleSubmit = event => {\n    event.preventDefault();\n    // call the login POST function\n    fetch('http://localhost:3010/v0/login', {\n      method: 'POST',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    // return whatever the json was ({email, access token})\n    .then(res => {\n      if (!res.ok) {\n        throw res;\n      }\n      return res.json();\n    })\n    // store in local storage with key 'user' the stringified json\n    .then(json => {\n      // stores {email, access token}\n      localStorage.setItem('user', JSON.stringify(json));\n      // puts us to the homepage of the application\n      history('/');\n    })\n    // if theres a problem logging in, errors\n    .catch(err => {\n      alert('Error logging in ' + err + ', please try again');\n    });\n  };\n\n  // if tests dont work return this to container\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        onChange: handleInputChange,\n        name: \"email\",\n        label: \"Email Address\",\n        \"aria-label\": \"email address\",\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        onChange: handleInputChange,\n        name: \"password\",\n        type: \"password\",\n        label: \"Password\",\n        \"aria-label\": \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        \"aria-label\": \"login button\",\n        onClick: handleSubmit,\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"fLHs/Wn3zxCWm2KzJiKioB/Dbco=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useNavigate","Button","TextField","Box","Stack","Login","user","setUser","useState","email","password","history","useEffect","localStorage","removeItem","handleInputChange","event","value","name","target","u","handleSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","ok","json","setItem","catch","err","alert","width"],"sources":["/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Login.jsx"],"sourcesContent":["import React from 'react';\nimport {useNavigate} from 'react-router-dom';\n\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\n\n/**\n * @return {object} Login Screen\n */\nfunction Login() {\n  const [user, setUser] = React.useState({email: '', password: ''});\n  const history = useNavigate();\n\n  React.useEffect(() => {\n    localStorage.removeItem('user');\n  }, []);\n\n  const handleInputChange = (event) => {\n    const {value, name} = event.target;\n    const u = user;\n    u[name] = value;\n    setUser(u);\n  };\n\n  // on submission of email and password\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // call the login POST function\n    fetch('http://localhost:3010/v0/login', {\n      method: 'POST',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n    // return whatever the json was ({email, access token})\n      .then((res) => {\n        if (!res.ok) {\n          throw res;\n        }\n        return res.json();\n      })\n      // store in local storage with key 'user' the stringified json\n      .then((json) => {\n        // stores {email, access token}\n        localStorage.setItem('user', JSON.stringify(json));\n        // puts us to the homepage of the application\n        history('/');\n      })\n      // if theres a problem logging in, errors\n      .catch((err) => {\n        alert('Error logging in ' + err + ', please try again');\n      });\n  };\n\n  // if tests dont work return this to container\n  return (\n    <Box sx={{width: '100%'}}>\n      <Stack spacing={2}>\n        <TextField\n          onChange={handleInputChange}\n          name=\"email\"\n          label=\"Email Address\"\n          aria-label=\"email address\"\n          autoFocus\n        />\n        <TextField\n          onChange={handleInputChange}\n          name=\"password\"\n          type=\"password\"\n          label=\"Password\"\n          aria-label=\"password\"\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          aria-label=\"login button\"\n          onClick={handleSubmit}\n        >\n         Log In\n        </Button>\n      </Stack>\n    </Box>\n  );\n}\n\nexport default Login;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,WAAW,QAAO,kBAAkB;AAE5C,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,KAAK,MAAM,qBAAqB;;AAEvC;AACA;AACA;AAFA;AAGA,SAASC,KAAK,GAAG;EAAA;EACf,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,KAAK,CAACS,QAAQ,CAAC;IAACC,KAAK,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAE,CAAC,CAAC;EACjE,MAAMC,OAAO,GAAGX,WAAW,EAAE;EAE7BD,KAAK,CAACa,SAAS,CAAC,MAAM;IACpBC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;EACjC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;IACnC,MAAM;MAACC,KAAK;MAAEC;IAAI,CAAC,GAAGF,KAAK,CAACG,MAAM;IAClC,MAAMC,CAAC,GAAGd,IAAI;IACdc,CAAC,CAACF,IAAI,CAAC,GAAGD,KAAK;IACfV,OAAO,CAACa,CAAC,CAAC;EACZ,CAAC;;EAED;EACA,MAAMC,YAAY,GAAIL,KAAK,IAAK;IAC9BA,KAAK,CAACM,cAAc,EAAE;IACtB;IACAC,KAAK,CAAC,gCAAgC,EAAE;MACtCC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACrB,IAAI,CAAC;MAC1BsB,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC;IACD;IAAA,CACGC,IAAI,CAAEC,GAAG,IAAK;MACb,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;QACX,MAAMD,GAAG;MACX;MACA,OAAOA,GAAG,CAACE,IAAI,EAAE;IACnB,CAAC;IACD;IAAA,CACCH,IAAI,CAAEG,IAAI,IAAK;MACd;MACAnB,YAAY,CAACoB,OAAO,CAAC,MAAM,EAAEP,IAAI,CAACC,SAAS,CAACK,IAAI,CAAC,CAAC;MAClD;MACArB,OAAO,CAAC,GAAG,CAAC;IACd,CAAC;IACD;IAAA,CACCuB,KAAK,CAAEC,GAAG,IAAK;MACdC,KAAK,CAAC,mBAAmB,GAAGD,GAAG,GAAG,oBAAoB,CAAC;IACzD,CAAC,CAAC;EACN,CAAC;;EAED;EACA,oBACE,QAAC,GAAG;IAAC,EAAE,EAAE;MAACE,KAAK,EAAE;IAAM,CAAE;IAAA,uBACvB,QAAC,KAAK;MAAC,OAAO,EAAE,CAAE;MAAA,wBAChB,QAAC,SAAS;QACR,QAAQ,EAAEtB,iBAAkB;QAC5B,IAAI,EAAC,OAAO;QACZ,KAAK,EAAC,eAAe;QACrB,cAAW,eAAe;QAC1B,SAAS;MAAA;QAAA;QAAA;QAAA;MAAA,QACT,eACF,QAAC,SAAS;QACR,QAAQ,EAAEA,iBAAkB;QAC5B,IAAI,EAAC,UAAU;QACf,IAAI,EAAC,UAAU;QACf,KAAK,EAAC,UAAU;QAChB,cAAW;MAAU;QAAA;QAAA;QAAA;MAAA,QACrB,eACF,QAAC,MAAM;QACL,IAAI,EAAC,QAAQ;QACb,OAAO,EAAC,WAAW;QACnB,cAAW,cAAc;QACzB,OAAO,EAAEM,YAAa;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAGf;IAAA;MAAA;MAAA;MAAA;IAAA;EACH;IAAA;IAAA;IAAA;EAAA,QACJ;AAEV;AAAC,GA3EQhB,KAAK;EAAA,QAEIL,WAAW;AAAA;AAAA,KAFpBK,KAAK;AA6Ed,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}