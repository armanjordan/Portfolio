{"ast":null,"code":"import _slicedToArray from\"/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from'react-router-dom';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import Box from'@mui/material/Box';import Stack from'@mui/material/Stack';/**\n * @return {object} Login Screen\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _React$useState=React.useState({email:'',password:''}),_React$useState2=_slicedToArray(_React$useState,2),user=_React$useState2[0],setUser=_React$useState2[1];var history=useNavigate();React.useEffect(function(){localStorage.removeItem('user');},[]);var handleInputChange=function handleInputChange(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;var u=user;u[name]=value;setUser(u);};// on submission of email and password\nvar handleSubmit=function handleSubmit(event){event.preventDefault();// call the login POST function\nfetch('http://localhost:3010/v0/login',{method:'POST',body:JSON.stringify(user),headers:{'Content-Type':'application/json'}})// return whatever the json was ({email, access token})\n.then(function(res){if(!res.ok){throw res;}return res.json();})// store in local storage with key 'user' the stringified json\n.then(function(json){// stores {email, access token}\nlocalStorage.setItem('user',JSON.stringify(json));// puts us to the homepage of the application\nhistory('/');})// if theres a problem logging in, errors\n.catch(function(err){alert('Error logging in '+err+', please try again');});};// if tests dont work return this to container\nreturn/*#__PURE__*/_jsx(Box,{sx:{width:'100%'},children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{onChange:handleInputChange,name:\"email\",label:\"Email Address\",\"aria-label\":\"email address\",autoFocus:true}),/*#__PURE__*/_jsx(TextField,{onChange:handleInputChange,name:\"password\",type:\"password\",label:\"Password\",\"aria-label\":\"password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",\"aria-label\":\"login button\",onClick:handleSubmit,children:\"Log In\"})]})});}export default Login;","map":{"version":3,"names":["React","useNavigate","Button","TextField","Box","Stack","Login","useState","email","password","user","setUser","history","useEffect","localStorage","removeItem","handleInputChange","event","target","value","name","u","handleSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","ok","json","setItem","catch","err","alert","width"],"sources":["/Users/armanjordan/Desktop/FullStack/Assignment8/Assignment8/frontend/src/components/Login.jsx"],"sourcesContent":["import React from 'react';\nimport {useNavigate} from 'react-router-dom';\n\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\n\n/**\n * @return {object} Login Screen\n */\nfunction Login() {\n  const [user, setUser] = React.useState({email: '', password: ''});\n  const history = useNavigate();\n\n  React.useEffect(() => {\n    localStorage.removeItem('user');\n  }, []);\n\n  const handleInputChange = (event) => {\n    const {value, name} = event.target;\n    const u = user;\n    u[name] = value;\n    setUser(u);\n  };\n\n  // on submission of email and password\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // call the login POST function\n    fetch('http://localhost:3010/v0/login', {\n      method: 'POST',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n    // return whatever the json was ({email, access token})\n      .then((res) => {\n        if (!res.ok) {\n          throw res;\n        }\n        return res.json();\n      })\n      // store in local storage with key 'user' the stringified json\n      .then((json) => {\n        // stores {email, access token}\n        localStorage.setItem('user', JSON.stringify(json));\n        // puts us to the homepage of the application\n        history('/');\n      })\n      // if theres a problem logging in, errors\n      .catch((err) => {\n        alert('Error logging in ' + err + ', please try again');\n      });\n  };\n\n  // if tests dont work return this to container\n  return (\n    <Box sx={{width: '100%'}}>\n      <Stack spacing={2}>\n        <TextField\n          onChange={handleInputChange}\n          name=\"email\"\n          label=\"Email Address\"\n          aria-label=\"email address\"\n          autoFocus\n        />\n        <TextField\n          onChange={handleInputChange}\n          name=\"password\"\n          type=\"password\"\n          label=\"Password\"\n          aria-label=\"password\"\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          aria-label=\"login button\"\n          onClick={handleSubmit}\n        >\n         Log In\n        </Button>\n      </Stack>\n    </Box>\n  );\n}\n\nexport default Login;\n"],"mappings":"2JAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAAQC,WAAW,KAAO,kBAAkB,CAE5C,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,IAAG,KAAM,mBAAmB,CACnC,MAAOC,MAAK,KAAM,qBAAqB,CAEvC;AACA;AACA,GAFA,wFAGA,QAASC,MAAK,EAAG,CACf,oBAAwBN,KAAK,CAACO,QAAQ,CAAC,CAACC,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAC,CAAC,oDAA1DC,IAAI,qBAAEC,OAAO,qBACpB,GAAMC,QAAO,CAAGX,WAAW,EAAE,CAE7BD,KAAK,CAACa,SAAS,CAAC,UAAM,CACpBC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC,CACjC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMC,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,KAAK,CAAK,CACnC,kBAAsBA,KAAK,CAACC,MAAM,CAA3BC,KAAK,eAALA,KAAK,CAAEC,IAAI,eAAJA,IAAI,CAClB,GAAMC,EAAC,CAAGX,IAAI,CACdW,CAAC,CAACD,IAAI,CAAC,CAAGD,KAAK,CACfR,OAAO,CAACU,CAAC,CAAC,CACZ,CAAC,CAED;AACA,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIL,KAAK,CAAK,CAC9BA,KAAK,CAACM,cAAc,EAAE,CACtB;AACAC,KAAK,CAAC,gCAAgC,CAAE,CACtCC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAClB,IAAI,CAAC,CAC1BmB,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CACD;AAAA,CACGC,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX,KAAMD,IAAG,CACX,CACA,MAAOA,IAAG,CAACE,IAAI,EAAE,CACnB,CAAC,CACD;AAAA,CACCH,IAAI,CAAC,SAACG,IAAI,CAAK,CACd;AACAnB,YAAY,CAACoB,OAAO,CAAC,MAAM,CAAEP,IAAI,CAACC,SAAS,CAACK,IAAI,CAAC,CAAC,CAClD;AACArB,OAAO,CAAC,GAAG,CAAC,CACd,CAAC,CACD;AAAA,CACCuB,KAAK,CAAC,SAACC,GAAG,CAAK,CACdC,KAAK,CAAC,mBAAmB,CAAGD,GAAG,CAAG,oBAAoB,CAAC,CACzD,CAAC,CAAC,CACN,CAAC,CAED;AACA,mBACE,KAAC,GAAG,EAAC,EAAE,CAAE,CAACE,KAAK,CAAE,MAAM,CAAE,uBACvB,MAAC,KAAK,EAAC,OAAO,CAAE,CAAE,wBAChB,KAAC,SAAS,EACR,QAAQ,CAAEtB,iBAAkB,CAC5B,IAAI,CAAC,OAAO,CACZ,KAAK,CAAC,eAAe,CACrB,aAAW,eAAe,CAC1B,SAAS,OACT,cACF,KAAC,SAAS,EACR,QAAQ,CAAEA,iBAAkB,CAC5B,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,KAAK,CAAC,UAAU,CAChB,aAAW,UAAU,EACrB,cACF,KAAC,MAAM,EACL,IAAI,CAAC,QAAQ,CACb,OAAO,CAAC,WAAW,CACnB,aAAW,cAAc,CACzB,OAAO,CAAEM,YAAa,oBAGf,GACH,EACJ,CAEV,CAEA,cAAehB,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}